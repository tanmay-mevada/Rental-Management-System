# ğŸ¨ Dynamic Navbar - Visual Architecture & Flow Diagrams

## Component Hierarchy Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Root Layout                             â”‚
â”‚                  (app/layout.tsx)                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚          DynamicNavbar Component                     â”‚   â”‚
â”‚ â”‚      (src/components/DynamicNavbar.tsx)             â”‚   â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚ â”‚                                                      â”‚   â”‚
â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚ â”‚  â”‚   Logo      â”‚  â”‚  Navigation  â”‚  â”‚  Auth    â”‚  â”‚   â”‚
â”‚ â”‚  â”‚   Section   â”‚  â”‚    Section   â”‚  â”‚ Section  â”‚  â”‚   â”‚
â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚ â”‚        â†“                 â†“                â†“         â”‚   â”‚
â”‚ â”‚     Brand Name    Role-Based Routes   User Menu    â”‚   â”‚
â”‚ â”‚     Logo Icon     Active Highlight    Theme        â”‚   â”‚
â”‚ â”‚                   Mobile Menu         Dropdown     â”‚   â”‚
â”‚ â”‚                                                      â”‚   â”‚
â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚ â”‚  â”‚     Mobile Menu (Full Screen Overlay)        â”‚  â”‚   â”‚
â”‚ â”‚  â”‚  â”œâ”€ Navigation Items                         â”‚  â”‚   â”‚
â”‚ â”‚  â”‚  â”œâ”€ Theme Toggle                            â”‚  â”‚   â”‚
â”‚ â”‚  â”‚  â””â”€ Auth Actions                            â”‚  â”‚   â”‚
â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚ â”‚                                                      â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚ â”‚          Page Content                              â”‚    â”‚
â”‚ â”‚  (app/page.tsx, vendor/layout.tsx, etc.)          â”‚    â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Data Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Component Mount                           â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Check Hydration Status                               â”‚
â”‚     (Prevent next-themes mismatch)                          â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Fetch User from Supabase                                â”‚
â”‚    supabase.auth.getUser()                                   â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚                                  â”‚
     â–¼ (User exists)            â–¼ (No user)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Fetch User Profile   â”‚    â”‚ Set user = null  â”‚
â”‚ from 'users' table   â”‚    â”‚ Show auth buttonsâ”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Set User Profile State                               â”‚
â”‚    {id, email, role, full_name}                             â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Call getNavItems(user.role)                             â”‚
â”‚                                                              â”‚
â”‚  if role === 'VENDOR'  â†’ Show vendor routes                 â”‚
â”‚  if role === 'CUSTOMER' â†’ Show customer routes              â”‚
â”‚  if role === 'ADMIN'   â†’ Show admin routes                  â”‚
â”‚  if !user             â†’ Show auth buttons                   â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        Render Navigation Items                               â”‚
â”‚     - Desktop Menu                                           â”‚
â”‚     - Mobile Menu (on request)                              â”‚
â”‚     - Profile Dropdown (on request)                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## State Management Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Component States                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚  mounted (boolean)                  â”‚
â”‚  â””â”€ Prevents hydration errors      â”‚
â”‚                                     â”‚
â”‚  user (UserProfile | null)          â”‚
â”‚  â”œâ”€ id: string                      â”‚
â”‚  â”œâ”€ email: string                   â”‚
â”‚  â”œâ”€ role: 'CUSTOMER|VENDOR|ADMIN'  â”‚
â”‚  â””â”€ full_name?: string              â”‚
â”‚                                     â”‚
â”‚  loading (boolean)                  â”‚
â”‚  â””â”€ Tracks user fetch status       â”‚
â”‚                                     â”‚
â”‚  isMobileMenuOpen (boolean)         â”‚
â”‚  â””â”€ Controls mobile menu visibility â”‚
â”‚                                     â”‚
â”‚  isProfileDropdownOpen (boolean)    â”‚
â”‚  â””â”€ Controls profile dropdown       â”‚
â”‚                                     â”‚
â”‚  theme (string)                     â”‚
â”‚  â”œâ”€ Current theme: 'dark' | 'light'â”‚
â”‚  â””â”€ From next-themes               â”‚
â”‚                                     â”‚
â”‚  resolvedTheme (string)             â”‚
â”‚  â””â”€ Actual theme (handles system)  â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Role-Based Route Mapping

```
                    â”Œâ”€ getNavItems() â”€â”
                    â”‚                 â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                â”‚                       â”‚
        â–¼                â–¼                       â–¼
    No User         CUSTOMER              VENDOR/ADMIN
    (Unauth)        Role                  Role
        â”‚                â”‚                    â”‚
        â–¼                â–¼                    â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Home       â”‚  â”‚ Home         â”‚  â”‚ Home            â”‚
    â”‚ Login      â”‚  â”‚ Browse       â”‚  â”‚ Dashboard       â”‚
    â”‚ Signup     â”‚  â”‚ Cart         â”‚  â”‚ Inventory       â”‚
    â”‚ Theme      â”‚  â”‚ Profile      â”‚  â”‚ Orders          â”‚
    â”‚ Toggle     â”‚  â”‚ Theme Toggle â”‚  â”‚ Invoicing       â”‚
    â”‚            â”‚  â”‚              â”‚  â”‚ Theme Toggle    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                â”‚                    â”‚
         â–¼                â–¼                    â–¼
      Auth               Customer          Vendor/Admin
      Buttons           Dashboard          Dashboard
```

---

## User Interaction Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    USER INTERACTIONS                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1. NAVIGATION CLICK
   â”œâ”€ Click nav item
   â”œâ”€ useRouter.push(href)
   â”œâ”€ usePathname() detects change
   â””â”€ Active route highlights

2. THEME TOGGLE
   â”œâ”€ Click sun/moon icon
   â”œâ”€ setTheme(opposite)
   â”œâ”€ next-themes updates
   â””â”€ Page transitions to new theme

3. MOBILE MENU
   â”œâ”€ Click hamburger
   â”œâ”€ setIsMobileMenuOpen(true)
   â”œâ”€ Full-screen overlay appears
   â”œâ”€ Click item â†’ navigate & close menu
   â””â”€ Click X â†’ close menu

4. PROFILE DROPDOWN
   â”œâ”€ Desktop only
   â”œâ”€ Click user profile button
   â”œâ”€ setIsProfileDropdownOpen(true)
   â”œâ”€ Show dropdown menu
   â”œâ”€ Click option â†’ execute action
   â””â”€ Click outside â†’ close dropdown

5. LOGOUT
   â”œâ”€ Click logout button
   â”œâ”€ supabase.auth.signOut()
   â”œâ”€ setUser(null)
   â”œâ”€ Show success toast
   â””â”€ router.push('/')
```

---

## Mobile vs Desktop Rendering

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    DESKTOP (â‰¥768px)      â”‚         â”‚   MOBILE (<768px)        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                          â”‚         â”‚                          â”‚
â”‚  Logo | Nav Items | Auth â”‚         â”‚  Logo | Menu | Theme     â”‚
â”‚                          â”‚         â”‚                          â”‚
â”‚  Desktop Items:          â”‚         â”‚  Mobile Items:           â”‚
â”‚  â”œâ”€ Visible navigation   â”‚         â”‚  â”œâ”€ Hamburger menu       â”‚
â”‚  â”œâ”€ Profile dropdown     â”‚         â”‚  â”œâ”€ Full-screen overlay  â”‚
â”‚  â”œâ”€ Theme toggle         â”‚         â”‚  â”œâ”€ Theme toggle in menu â”‚
â”‚  â”œâ”€ Login/Signup buttons â”‚         â”‚  â”œâ”€ Auth in menu         â”‚
â”‚  â””â”€ Logout option        â”‚         â”‚  â””â”€ Logout in menu       â”‚
â”‚                          â”‚         â”‚                          â”‚
â”‚  Display: flex           â”‚         â”‚  Display: grid           â”‚
â”‚  Justify: space-between  â”‚         â”‚  Stack: vertical         â”‚
â”‚  Gap: 24px               â”‚         â”‚  Padding: 16px           â”‚
â”‚                          â”‚         â”‚                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Authentication Flow

```
START
  â”‚
  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Check Supabase Session            â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚                  â”‚
     â–¼                  â–¼
  LOGGED IN         NOT LOGGED IN
     â”‚                  â”‚
     â–¼                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Fetch User   â”‚   â”‚ Show Login   â”‚
â”‚ Profile      â”‚   â”‚ Sign Up      â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ Buttons      â”‚
     â”‚             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Get User     â”‚
â”‚ Role         â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Load Role    â”‚
â”‚ Specific     â”‚
â”‚ Routes       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

User navigates â†’ Active route highlighted
User clicks logout â†’ Back to START
```

---

## Component Tree with Props & State

```
â”Œâ”€ DynamicNavbar â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                  â”‚
â”‚  Props: None (self-contained)                   â”‚
â”‚                                                  â”‚
â”‚  Context:                                        â”‚
â”‚  â”œâ”€ useRouter (from next/navigation)            â”‚
â”‚  â”œâ”€ usePathname (from next/navigation)          â”‚
â”‚  â””â”€ useTheme (from next-themes)                 â”‚
â”‚                                                  â”‚
â”‚  State:                                          â”‚
â”‚  â”œâ”€ mounted: boolean                            â”‚
â”‚  â”œâ”€ user: UserProfile | null                    â”‚
â”‚  â”œâ”€ loading: boolean                            â”‚
â”‚  â”œâ”€ isMobileMenuOpen: boolean                   â”‚
â”‚  â”œâ”€ isProfileDropdownOpen: boolean              â”‚
â”‚  â”œâ”€ theme: string                               â”‚
â”‚  â””â”€ resolvedTheme: string                       â”‚
â”‚                                                  â”‚
â”‚  Sub-Components:                                â”‚
â”‚  â”œâ”€ Desktop Navigation                          â”‚
â”‚  â”œâ”€ Mobile Menu Overlay                         â”‚
â”‚  â”œâ”€ Profile Dropdown                            â”‚
â”‚  â”œâ”€ Theme Toggle Button                         â”‚
â”‚  â”œâ”€ Logo Section                                â”‚
â”‚  â””â”€ Auth Buttons                                â”‚
â”‚                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Routing Structure

```
ROUTES RENDERED BASED ON USER ROLE:

Unauthenticated User:
â””â”€â”€ / (Home)
    â””â”€â”€ /login
    â””â”€â”€ /signup/customer
    â””â”€â”€ /signup/vendor

Customer User:
â”œâ”€â”€ / (Home)
â”œâ”€â”€ /products (Browse)
â”œâ”€â”€ /cart (Shopping Cart)
â”œâ”€â”€ /profile (User Profile)
â””â”€â”€ /dashboard (if customer dashboard exists)

Vendor User:
â”œâ”€â”€ / (Home)
â”œâ”€â”€ /vendor/dashboard
â”œâ”€â”€ /vendor/inventory
â”œâ”€â”€ /vendor/orders
â””â”€â”€ /vendor/invoicing

Admin User:
â”œâ”€â”€ / (Home)
â”œâ”€â”€ /admin/dashboard
â”œâ”€â”€ /admin/users
â””â”€â”€ /admin/settings

All Users:
â””â”€â”€ /logout (via dropdown)
```

---

## Theme System Architecture

```
â”Œâ”€ next-themes â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                          â”‚
â”‚  â”Œâ”€ localStorage â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  theme preference saved         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                          â”‚
â”‚  â”Œâ”€ useTheme() Hook â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  â”œâ”€ theme: string               â”‚   â”‚
â”‚  â”‚  â”œâ”€ setTheme(t): function       â”‚   â”‚
â”‚  â”‚  â””â”€ resolvedTheme: string       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                          â”‚
â”‚  â”Œâ”€ ThemeProvider â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  â”œâ”€ Wraps App (layout.tsx)       â”‚  â”‚
â”‚  â”‚  â”œâ”€ Manages theme state          â”‚  â”‚
â”‚  â”‚  â””â”€ Provides context             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                          â”‚
â”‚  â”Œâ”€ Tailwind (dark:) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  â”œâ”€ Light colors: globals.css    â”‚  â”‚
â”‚  â”‚  â””â”€ Dark colors: .dark in CSS    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                          â”‚
â”‚  â”Œâ”€ Transitions â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  â”œâ”€ duration-300 on theme        â”‚  â”‚
â”‚  â”‚  â””â”€ Smooth color change          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Mobile Menu Rendering Tree

```
Mobile Menu (when isMobileMenuOpen = true)
â”‚
â”œâ”€ Background Overlay (fixed, full-screen)
â”‚  â””â”€ Closes menu on click
â”‚
â”œâ”€ Menu Container (fixed, top-24, right, bottom, left)
â”‚  â”‚
â”‚  â”œâ”€ Navigation Items Section
â”‚  â”‚  â”œâ”€ Home
â”‚  â”‚  â”œâ”€ Browse (if customer)
â”‚  â”‚  â”œâ”€ Dashboard (if vendor/admin)
â”‚  â”‚  â”œâ”€ Other role-specific items...
â”‚  â”‚  â””â”€ (Closes menu on click)
â”‚  â”‚
â”‚  â”œâ”€ Divider
â”‚  â”‚
â”‚  â”œâ”€ User Section (if authenticated)
â”‚  â”‚  â”œâ”€ Role Badge Display
â”‚  â”‚  â”œâ”€ Profile Link (if customer)
â”‚  â”‚  â””â”€ Logout Button
â”‚  â”‚     â””â”€ Calls handleLogout()
â”‚  â”‚
â”‚  â”œâ”€ Auth Section (if not authenticated)
â”‚  â”‚  â”œâ”€ Login Link
â”‚  â”‚  â””â”€ Sign Up Button
â”‚  â”‚
â”‚  â”œâ”€ Divider
â”‚  â”‚
â”‚  â””â”€ Theme Section
â”‚     â”œâ”€ Sun/Moon Icon
â”‚     â””â”€ Label: "Light Mode" or "Dark Mode"
â”‚        â””â”€ Calls setTheme()
```

---

## Performance Optimization Diagram

```
OPTIMIZATION STRATEGIES:

1. LAZY USER FETCHING
   â””â”€ User profile fetched once on mount
      â””â”€ Not refetched on every render

2. MEMOIZATION
   â””â”€ useCallback for event handlers
      â””â”€ Prevents child re-renders

3. CONDITIONAL RENDERING
   â”œâ”€ Mobile menu only renders when open
   â”œâ”€ Dropdown only renders when open
   â””â”€ Reduces DOM nodes

4. CSS TRANSITIONS
   â”œâ”€ GPU-accelerated animations
   â”œâ”€ No JavaScript animation loops
   â””â”€ Smooth, efficient

5. CODE SPLITTING
   â””â”€ Navbar as separate component
      â””â”€ Can be lazy loaded if needed

6. DEBOUNCING
   â”œâ”€ Mobile menu state changes debounced
   â””â”€ Prevents rapid re-renders
```

---

## Error Handling Flow

```
TRY BLOCK:
â”œâ”€ Fetch user from Supabase auth
â”‚  â”œâ”€ âœ“ User found â†’ Continue
â”‚  â””â”€ âœ— No user â†’ Set user to null
â”‚
â”œâ”€ Fetch user profile from users table
â”‚  â”œâ”€ âœ“ Profile found â†’ Set profile state
â”‚  â””â”€ âœ— Error â†’ Log and continue with partial data
â”‚
â””â”€ Handle logout
   â”œâ”€ âœ“ Logout successful â†’ Redirect to home
   â””â”€ âœ— Error â†’ Show error toast

CATCH BLOCK:
â””â”€ Log error to console
   â””â”€ User sees graceful degradation
```

---

**These diagrams show the complete architecture and flow of your Dynamic Navbar system!** ğŸ“Š

For implementation details, see: [DYNAMIC_NAVBAR_README.md](DYNAMIC_NAVBAR_README.md)
